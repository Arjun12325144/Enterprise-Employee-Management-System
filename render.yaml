services:
  # Backend API
  - type: web
    name: ems-api
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: JwtSettings__SecretKey
        value: YourSuperSecretKeyForProduction2024EMS!@#$%
      - key: JwtSettings__Issuer
        value: EMS.API
      - key: JwtSettings__Audience
        value: EMS.Client
      - key: DATABASE_URL
        fromDatabase:
          name: ems-database
          property: connectionString
      - key: CORS_ORIGINS
        value: https://ems-frontend.onrender.com

databases:
  - name: ems-database
    plan: free
    databaseName: ems_production
